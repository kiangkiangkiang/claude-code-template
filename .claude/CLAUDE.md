# CLAUDE.md - AI 開發助手指南

## 概述

本文件是 Claude AI 助手的核心指引，說明如何在此專案中有效協作開發。遵循本指南中的原則和流程，確保專案管理的一致性和效率。

## 核心概念：三層指令架構

在此專案中，所有指令分為三個層級：

### 1. 系統指令（System Instructions）
- **位置**: `.claude/docs/`
- **性質**: 全局、穩定的開發流程和工具使用指南
- **範例**: Git 工作流程、SDD 開發模式、工具使用說明
- **特點**: 跨專案通用，很少變動

### 2. 專案指令（Project Instructions）
- **位置**: `.claude/docs/PROJECT.md`
- **性質**: 此 GitHub Repo 的目標、Epic 概念、核心價值與開發守則
- **特點**: 專案特定，隨專案進展持續更新
- **重要性**: 每次接收任務前必須參考，確保符合專案方向

### 3. 任務指令（Task Instructions）
- **位置**: `.claude/docs/TASK.md`、GitHub Issues、Git Commits
- **性質**: 當前正在執行的具體任務
- **特點**: 動態變化，任務完成後清空或更新
- **記錄方式**: 透過 Git 歷史追蹤

## 工具使用指南

### .claude/tools 工具集

專案提供的工具位於 `.claude/tools/` 目錄下，你必須善用這些工具來管理專案。

#### Git 工具 (.claude/tools/git)
- **位置**: `.claude/tools/git/`
- **說明文件**: 查看該目錄下的 `README.md` 了解詳細用法
- **用途**:
  - 專案版本管控
  - Issue 管理
  - Branch 管理
  - Pull Request 管理
  - 查看開發歷史

**重要**: 透過 Git repo 管理 codebase 內的所有 history，確保每個變更都有清晰的記錄。

## SDD 開發模式

**Specification-Driven Development (規格驅動開發)**

1. **文件優先**: 所有系統概念統一放在 `.claude/docs/` 內
2. **指引式設計**: CLAUDE.md 提供宏觀概念和文件指引
3. **詳細文件分離**: 具體流程和細節放在對應的專門文件中
4. **持續更新**: PROJECT.md 和 TASK.md 隨開發進度持續迭代

## 標準開發流程

### 啟動工作流程

每次開始工作時：

1. **查看 TASK.md**: 檢查 `.claude/docs/TASK.md` 了解當前任務狀態
2. **查看 GitHub Issues**: 確認是否有未完成的 issue
3. **查看 Git Log**: 了解最近的開發歷史和進度
4. **查看 PROJECT.md**: 確認當前專案方向和目標

### 接收新任務流程

當使用者給予新任務時：

1. **任務理解**: 分析任務需求和目標
2. **判斷關聯性**:
   - 如果與上次任務相關 → 接續開發
   - 如果是全新任務 → 準備創建新的開發分支
3. **更新 TASK.md**: 記錄當前需求描述
4. **拆分 Issue**: 將抽象任務拆分為 issue
   - 通常一個 Issue 即可，若任務太大再去細分 
   - 一個 issue 對應一個 task
   - Issue 內容要清楚列出要解決的問題
5. **創建 Branch**: 為每個 issue 創建對應的開發分支
6. **開始開發**: 在分支上進行開發工作
7. **記錄進度**: 透過 git commit 記錄每個步驟
8. **完成任務**: 合併分支，更新或清空 TASK.md

### 持續更新 PROJECT.md

PROJECT.md 是動態文件，隨著專案進展持續更新：

- ✅ 完成需求時：更新專案進度和成就
- 📝 新需求出現時：調整專案方向和目標
- 🔍 查看 PR/Issue/Branch 時：整理專案洞察
- 📊 查看 Git Log 時：總結開發趨勢

## 任務管理原則

### TASK.md 管理
- **記錄內容**: 當前需求描述、相關 issue、開發分支
- **更新時機**: 接收新任務、任務進展、任務完成
- **清空時機**: 需求完全解決
- **取代規則**: 新需求直接取代舊內容

### Issue 管理
- 使用 `.claude/tools/git` 工具創建和管理 issue
- 每個 issue 聚焦單一問題
- Issue 描述要清晰、可執行

### Branch 管理
- 每個 issue 對應一個開發分支
- 分支命名要有意義
- 完成後透過 PR 合併

## 文件結構索引

```
.claude/
├── CLAUDE.md               # 本文件（宏觀指引）
├── docs/                   # 文件中心
│   ├── PROJECT.md          # 專案目標與守則（持續更新）
│   └── TASK.md             # 當前任務狀態（動態變化）
└── tools/                  # 工具集
    └── git/                # Git 管理工具
        └── README.md       # Git 工具使用說明
```

## 工作原則

1. **文件優先**: 始終先查看相關文件再開始工作
2. **記錄完整**: 所有變更都要有清晰的 Git 記錄
3. **持續更新**: 保持 PROJECT.md 和 TASK.md 的時效性
4. **工具善用**: 充分利用 `.claude/tools` 提供的工具
5. **流程遵循**: 嚴格按照標準開發流程執行

## 總結

此文件提供宏觀概念和指引，具體細節請參考對應的文件：
- 系統流程 → `.claude/docs/` 內的專門文件
- 專案目標 → `.claude/docs/PROJECT.md`
- 當前任務 → `.claude/docs/TASK.md`
- 工具使用 → `.claude/tools/*/README.md`

透過這個架構，確保開發工作有條不紊、記錄完整、方向明確。
